<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calls - DateFlow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #E11D48;
            --primary-hover: #BE123C;
            --background: #0A0A0B;
            --background-secondary: #111113;
            --surface: #18181B;
            --surface-hover: #27272A;
            --border: #27272A;
            --text-primary: #FAFAFA;
            --text-secondary: #A1A1AA;
            --text-muted: #71717A;
            --success: #22C55E;
            --warning: #F59E0B;
            --error: #EF4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .calls-header {
            position: sticky;
            top: 0;
            background: rgba(10, 10, 11, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 16px 20px;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .calls-header h1 { font-size: 28px; font-weight: 700; }

        .tabs {
            display: flex;
            gap: 8px;
        }

        .tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .tab:hover { color: var(--text-secondary); }
        .tab.active { background: var(--surface); color: var(--text-primary); }

        .call-list { padding: 16px 20px; }

        .call-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .call-item:hover { background: var(--surface-hover); }

        .call-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            object-fit: cover;
        }

        .call-info { flex: 1; }
        .call-name { font-size: 16px; font-weight: 600; margin-bottom: 4px; }

        .call-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .call-type {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .call-type svg { width: 14px; height: 14px; }
        .call-type.incoming svg { stroke: var(--success); }
        .call-type.outgoing svg { stroke: var(--text-muted); }
        .call-type.missed svg { stroke: var(--error); }
        .call-type.missed { color: var(--error); }

        .call-actions { display: flex; gap: 8px; }

        .call-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .call-btn svg { width: 20px; height: 20px; }

        .btn-voice {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .btn-voice:hover { background: rgba(34, 197, 94, 0.2); }
        .btn-voice svg { stroke: var(--success); }

        .btn-video {
            background: rgba(225, 29, 72, 0.1);
            border: 1px solid rgba(225, 29, 72, 0.3);
        }

        .btn-video:hover { background: rgba(225, 29, 72, 0.2); }
        .btn-video svg { stroke: var(--primary); }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            background: var(--surface);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }

        .empty-icon svg { width: 36px; height: 36px; stroke: var(--text-muted); }
        .empty-state h3 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .empty-state p { color: var(--text-muted); font-size: 14px; }

        /* Active Call Screen */
        .active-call-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--background);
            z-index: 1000;
            display: none;
            flex-direction: column;
        }

        .active-call-overlay.show { display: flex; }

        .call-screen-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .minimize-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--surface);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .minimize-btn svg { width: 20px; height: 20px; stroke: var(--text-secondary); }

        .call-quality {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--success);
        }

        .call-quality svg { width: 16px; height: 16px; stroke: currentColor; }

        .call-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .caller-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 24px;
            border: 4px solid var(--surface);
        }

        .caller-name { font-size: 28px; font-weight: 600; margin-bottom: 8px; }

        .call-status {
            font-size: 16px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .call-timer {
            font-size: 20px;
            font-weight: 500;
            color: var(--success);
        }

        .call-controls {
            padding: 40px 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .control-btn {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-btn svg { width: 28px; height: 28px; }

        .control-btn.mute { background: var(--surface); }
        .control-btn.mute svg { stroke: var(--text-primary); }
        .control-btn.mute.active { background: var(--error); }

        .control-btn.speaker { background: var(--surface); }
        .control-btn.speaker svg { stroke: var(--text-primary); }
        .control-btn.speaker.active { background: var(--primary); }

        .control-btn.video-toggle { background: var(--surface); }
        .control-btn.video-toggle svg { stroke: var(--text-primary); }

        .control-btn.end-call {
            width: 72px;
            height: 72px;
            background: var(--error);
        }

        .control-btn.end-call:hover { background: #DC2626; }
        .control-btn.end-call svg { stroke: white; }

        /* Video call */
        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
        }

        .remote-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .local-video {
            position: absolute;
            top: 100px;
            right: 20px;
            width: 120px;
            height: 160px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid var(--surface);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--background-secondary);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            padding-bottom: max(12px, env(safe-area-inset-bottom));
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-decoration: none;
            color: var(--text-muted);
            font-size: 11px;
            transition: color 0.2s;
        }

        .nav-item:hover, .nav-item.active { color: var(--primary); }
        .nav-item svg { width: 24px; height: 24px; stroke: currentColor; }

        .nav-item.active svg {
            stroke: var(--primary);
        }

        /* Premium nav item styles */
        .nav-item.premium {
            color: var(--success);
        }

        .nav-item.premium:hover {
            color: var(--primary);
        }

        @media (min-width: 768px) {
            .call-list { max-width: 600px; margin: 0 auto; }
            .bottom-nav { max-width: 600px; left: 50%; transform: translateX(-50%); border-radius: 16px 16px 0 0; }
        }
    </style>
</head>
<body>
    <header class="calls-header">
        <div class="header-content">
            <h1>Calls</h1>
        </div>
        <div class="tabs">
            <button class="tab active" onclick="filterCalls('all')">All</button>
            <button class="tab" onclick="filterCalls('missed')">Missed</button>
        </div>
    </header>

    <div class="call-list" id="callList">
        <div class="call-item" onclick="startCall('voice', '1', 'Emma Wilson')">
            <img src="/placeholder.svg?height=56&width=56" alt="Emma" class="call-avatar">
            <div class="call-info">
                <div class="call-name">Emma Wilson</div>
                <div class="call-meta">
                    <span class="call-type incoming">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                        Incoming
                    </span>
                    <span>Today, 2:34 PM</span>
                    <span>5:23</span>
                </div>
            </div>
            <div class="call-actions">
                <button class="call-btn btn-voice" onclick="event.stopPropagation(); startCall('voice', '1', 'Emma Wilson')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                </button>
                <button class="call-btn btn-video" onclick="event.stopPropagation(); startCall('video', '1', 'Emma Wilson')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
            </div>
        </div>

        <div class="call-item" onclick="startCall('video', '2', 'Sophia Martinez')">
            <img src="/placeholder.svg?height=56&width=56" alt="Sophia" class="call-avatar">
            <div class="call-info">
                <div class="call-name">Sophia Martinez</div>
                <div class="call-meta">
                    <span class="call-type missed">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            <line x1="23" y1="1" x2="17" y2="7"/>
                        </svg>
                        Missed
                    </span>
                    <span>Yesterday</span>
                </div>
            </div>
            <div class="call-actions">
                <button class="call-btn btn-voice" onclick="event.stopPropagation(); startCall('voice', '2', 'Sophia Martinez')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                </button>
                <button class="call-btn btn-video" onclick="event.stopPropagation(); startCall('video', '2', 'Sophia Martinez')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
            </div>
        </div>

        <div class="call-item" onclick="startCall('voice', '3', 'Olivia Chen')">
            <img src="/placeholder.svg?height=56&width=56" alt="Olivia" class="call-avatar">
            <div class="call-info">
                <div class="call-name">Olivia Chen</div>
                <div class="call-meta">
                    <span class="call-type outgoing">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            <polyline points="17 2 23 2 23 8"/>
                        </svg>
                        Outgoing
                    </span>
                    <span>Dec 28</span>
                    <span>12:45</span>
                </div>
            </div>
            <div class="call-actions">
                <button class="call-btn btn-voice" onclick="event.stopPropagation(); startCall('voice', '3', 'Olivia Chen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                </button>
                <button class="call-btn btn-video" onclick="event.stopPropagation(); startCall('video', '3', 'Olivia Chen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Active Call Overlay -->
    <div class="active-call-overlay" id="activeCall">
        <div class="call-screen-header">
            <button class="minimize-btn" onclick="minimizeCall()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="4 14 10 14 10 20"></polyline>
                    <polyline points="20 10 14 10 14 4"></polyline>
                    <line x1="14" y1="10" x2="21" y2="3"></line>
                    <line x1="3" y1="21" x2="10" y2="14"></line>
                </svg>
            </button>
            <div class="call-quality">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                    <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                    <circle cx="12" cy="20" r="1"></circle>
                </svg>
                Good
            </div>
        </div>
        
        <div class="call-content" id="callContent">
            <img src="/placeholder.svg?height=140&width=140" alt="Caller" class="caller-avatar" id="callerAvatar">
            <div class="caller-name" id="callerName">Emma Wilson</div>
            <div class="call-status" id="callStatus">Calling...</div>
            <div class="call-timer" id="callTimer" style="display: none;">00:00</div>
        </div>

        <div class="call-controls">
            <button class="control-btn mute" onclick="toggleMute(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                    <line x1="12" y1="19" x2="12" y2="23"></line>
                    <line x1="8" y1="23" x2="16" y2="23"></line>
                </svg>
            </button>
            <button class="control-btn end-call" onclick="endCall()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path>
                    <line x1="23" y1="1" x2="1" y2="23"></line>
                </svg>
            </button>
            <button class="control-btn speaker" onclick="toggleSpeaker(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                </svg>
            </button>
            <button class="control-btn video-toggle" id="videoToggle" onclick="toggleVideo(this)" style="display: none;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                </svg>
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="matches.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            Discover
        </a>
        <a href="messages.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            Messages
        </a>
        <a href="subscription.html" class="nav-item premium">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
            Premium
        </a>
        <a href="profile.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Profile
        </a>
    </nav>

    <script>
        const token = localStorage.getItem('dateflow_token');
        if (!token) {
            window.location.href = 'authentication.html';
        }

        let callTimer = null;
        let callSeconds = 0;
        let currentCallType = 'voice';

        function filterCalls(type) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.call-item').forEach(item => {
                if (type === 'all') {
                    item.style.display = 'flex';
                } else {
                    const isMissed = item.querySelector('.call-type.missed');
                    item.style.display = isMissed ? 'flex' : 'none';
                }
            });
        }

        function startCall(type, userId, userName) {
            currentCallType = type;
            document.getElementById('activeCall').classList.add('show');
            document.getElementById('callerName').textContent = userName;
            document.getElementById('callStatus').textContent = 'Calling...';
            document.getElementById('callTimer').style.display = 'none';
            document.getElementById('videoToggle').style.display = type === 'video' ? 'flex' : 'none';

            // Simulate call connecting
            setTimeout(() => {
                document.getElementById('callStatus').textContent = type === 'video' ? 'Video Call' : 'Voice Call';
                document.getElementById('callTimer').style.display = 'block';
                startTimer();
            }, 2000);
        }

        function startTimer() {
            callSeconds = 0;
            callTimer = setInterval(() => {
                callSeconds++;
                const mins = Math.floor(callSeconds / 60).toString().padStart(2, '0');
                const secs = (callSeconds % 60).toString().padStart(2, '0');
                document.getElementById('callTimer').textContent = `${mins}:${secs}`;
            }, 1000);
        }

        function endCall() {
            if (callTimer) {
                clearInterval(callTimer);
                callTimer = null;
            }
            document.getElementById('activeCall').classList.remove('show');
        }

        function minimizeCall() {
            document.getElementById('activeCall').classList.remove('show');
        }

        function toggleMute(btn) {
            btn.classList.toggle('active');
        }

        function toggleSpeaker(btn) {
            btn.classList.toggle('active');
        }

        function toggleVideo(btn) {
            btn.classList.toggle('active');
        }
    </script>
</body>
</html>
